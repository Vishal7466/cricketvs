<!--
CricketVS — Player Weakness & Strategy Generator
Single-file HTML + JS (mock logic). Save as `player-analyzer.html` or paste into your site.

Features in this file:
- Clean, modern UI matching CricketVS color palette
- Player name input (Hindi/English labels)
- Mock AI analysis (replace with server/LLM integration later)
- Pitch & weather selector to simulate context
- Export JSON & copy result buttons
- Small, responsive design

How to connect to real AI / data:
1) Replace `mockAnalyzePlayer(name, context)` with an API call to your backend that uses CricAPI + LLM.
   Recommended endpoint: POST /api/analyze_player { name, pitch, weather }
   Response shape example:
   { summary, weaknesses: [{type,detail,confidence}], dangerAgainst:[{bowler,reason}], pitchScore, advice }
2) Host a small server to assemble player stats and call an LLM (e.g., OpenAI) to create structured JSON.

-->

<!doctype html>
<html lang="hi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>CricketVS — Player Weakness & Strategy Generator</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#071228; /* site bg */
    --card:#0b1723; /* card */
    --muted:#9aa4b2;
    --accent:#06b6d4; /* cyan */
    --accent2:#7c3aed; /* violet */
    --glass: rgba(255,255,255,0.03);
    --success: #10b981;
    --danger: #ef4444;
  }
  *{box-sizing:border-box}
  body{font-family:Inter,system-ui,Segoe UI,Roboto,Arial;margin:0;background:linear-gradient(180deg,#051426 0%, var(--bg) 100%);color:#e6eef6;-webkit-font-smoothing:antialiased}
  .wrap{max-width:1100px;margin:28px auto;padding:18px}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px}
  .brand{display:flex;align-items:center;gap:12px}
  .logo{width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:700;color:#021;box-shadow:0 6px 18px rgba(4,12,24,0.6)}
  h1{margin:0;font-size:20px}
  p.lead{margin:4px 0 0 0;color:var(--muted);font-size:13px}

  .grid{display:grid;grid-template-columns:1fr 420px;gap:18px;margin-top:18px}
  .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:16px;border-radius:12px;box-shadow:0 8px 30px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.03)}

  label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
  input[type=text], select, textarea{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit}
  .row{display:flex;gap:8px}
  button.primary{background:linear-gradient(90deg,var(--accent),var(--accent2));border:0;padding:10px 12px;border-radius:10px;color:#021;cursor:pointer;font-weight:600}
  button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:10px 12px;border-radius:10px;color:var(--muted);cursor:pointer}

  .muted{color:var(--muted);font-size:13px}
  .result .section{margin-bottom:12px}
  .pill{display:inline-block;padding:6px 8px;border-radius:999px;background:var(--glass);font-size:13px;margin-right:8px}

  .bar{height:12px;border-radius:8px;background:rgba(255,255,255,0.04);overflow:hidden}
  .bar > i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),var(--accent2));}

  .danger{color:var(--danger)}
  .success{color:var(--success)}

  .small{font-size:13px;color:var(--muted)}
  .copy{display:flex;gap:8px;align-items:center}

  footer{margin-top:16px;color:var(--muted);font-size:13px;text-align:center}

  @media(max-width:980px){.grid{grid-template-columns:1fr}.brand h1{font-size:18px}}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">CV</div>
        <div>
          <h1>CricketVS — Player Weakness & Strategy</h1>
          <p class="lead">Enter player name — turant AI-style analysis. (Demo: mock data; replace with real APIs)</p>
        </div>
      </div>
      <div class="small muted">Design: matches CricketVS palette</div>
    </header>

    <div class="grid">
      <div class="card">
        <div>
          <label for="playerName">Player Name (नाम)</label>
          <input id="playerName" type="text" placeholder="e.g. Rohit Sharma / विराट कोहली" />

          <div style="display:flex;gap:8px;margin-top:10px">
            <div style="flex:1">
              <label for="pitch">Pitch Type</label>
              <select id="pitch">
                <option value="flat">Flat (Batting pitch)</option>
                <option value="green">Green (Seam assist)</option>
                <option value="dusty">Dusty (Spin assist)</option>
                <option value="variable">Variable</option>
              </select>
            </div>
            <div style="width:160px">
              <label for="weather">Weather</label>
              <select id="weather">
                <option value="clear">Clear</option>
                <option value="overcast">Overcast</option>
                <option value="humid">Humid</option>
                <option value="windy">Windy</option>
              </select>
            </div>
          </div>

          <div style="display:flex;gap:8px;margin-top:12px">
            <button class="primary" id="analyzeBtn">Analyze Player</button>
            <button class="ghost" id="clearBtn">Clear</button>
          </div>

          <div id="status" class="small muted" style="margin-top:10px">Tip: For production, call your backend to compute this using CricAPI + LLM.</div>
        </div>

        <div id="result" class="result" style="margin-top:14px;display:none">
          <div class="section">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div>
                <strong id="resName">Player Name</strong>
                <div class="muted small" id="resMeta">Summary</div>
              </div>
              <div class="copy">
                <button class="ghost" id="copyJson">Copy JSON</button>
                <button class="ghost" id="downloadJson">Download</button>
              </div>
            </div>
          </div>

          <div class="section">
            <label style="margin-bottom:8px">Weaknesses</label>
            <div id="weaknesses"></div>
          </div>

          <div class="section">
            <label>Danger vs Bowlers</label>
            <div id="dangerList"></div>
          </div>

          <div class="section">
            <label>Pitch / Weather Impact</label>
            <div class="small muted" id="pitchImpact">Score impact</div>
            <div style="margin-top:8px" class="bar" title="performance score"><i id="scoreBar" style="width:50%"></i></div>
          </div>

          <div class="section">
            <label>Actionable Advice</label>
            <div id="advice"></div>
          </div>
        </div>

      </div>

      <div class="card">
        <h3 style="margin-top:0">Quick Preview (Mock AI)</h3>
        <p class="muted">Ye side panel demo mein kuch sample outputs dikhata hai. Real integration se responses zyada detailed aur personalized honge.</p>

        <div style="margin-top:12px">
          <div class="pill">Use with CricAPI</div>
          <div class="pill">LLM + structured JSON</div>
          <div class="pill">Fantasy tips</div>
        </div>

        <div style="margin-top:12px">
          <label>Example Players</label>
          <div style="display:flex;flex-direction:column;gap:8px;margin-top:8px">
            <button class="ghost sample" data-name="Virat Kohli">Virat Kohli</button>
            <button class="ghost sample" data-name="Rohit Sharma">Rohit Sharma</button>
            <button class="ghost sample" data-name="Babar Azam">Babar Azam</button>
            <button class="ghost sample" data-name="Shubman Gill">Shubman Gill</button>
          </div>
        </div>

        <hr style="border:none;height:1px;background:rgba(255,255,255,0.03);margin:14px 0">

        <div>
          <label>Integration Hints</label>
          <ul class="small muted">
            <li>Fetch last 50 innings from CricAPI and compute strike-rate by zone.</li>
            <li>Send player stats + pitch to LLM with clear schema request.</li>
            <li>Cache results for 1 hour for active players to save costs.</li>
          </ul>
        </div>
      </div>
    </div>

    <footer>Made for CricketVS · Replace mock logic with your backend for production</footer>
  </div>

<script>
// --- Mock analysis logic ---
// Replace this function with an actual API call to your server + LLM


  //  const API_KEYS = [
  //   "d148671e-e9db-4319-af93-ff76a71b62da",
  //   "1fc12cd8-000e-4c67-b5d7-19c5b099f0c4",
  //   "00cba27a-5d5f-4128-a947-d0423fd1e75d",
  //   "d02218f2-cd57-496a-b11a-02b747344869",
  //   "22a5e579-378b-4606-9313-d348eafd7559",
  //   "815ba601-7994-4225-8173-e01e1e8ee56e",
  //   "afcb973d-8375-4361-b3ec-919ee9e0cdaa",
  //   "b5e65b5a-3c3b-4a74-8933-d221354ed1f9",
  //   "3115a74f-9bf2-4335-9fec-1ba179fc67e7",
  //   "d1b0c7be-5f1d-46a3-960b-1eb5e4c97384",
  //   "c1f712ef-2990-43c8-899a-9992a4ffe075"
  // ];

const API_KEY = "3115a74f-9bf2-4335-9fec-1ba179fc67e7";

async function analyzePlayerDynamic(name, context){
  if(!name || name.trim().length < 2){
    return { error: "Please enter a valid player name." };
  }

  try {
    const searchUrl = `https://api.cricapi.com/v1/players?apikey=${API_KEY}&search=${encodeURIComponent(name)}`;
    const res = await fetch(searchUrl);
    const data = await res.json();
    if(!data.data || data.data.length === 0){
      return { error: "Player not found in CricAPI." };
    }
    const pid = data.data[0].id;

    const infoUrl = `https://api.cricapi.com/v1/players_info?apikey=${API_KEY}&id=${pid}`;
    const infoRes = await fetch(infoUrl);
    const info = await infoRes.json();

    let summary = info.data?.info || "Limited data available.";

    const stats = info.data?.stats || [];
    const weaknesses = [];
    const dangerAgainst = [];

    stats.forEach(s => {
      if(s.fn && s.fn.includes("strike") && parseInt(s.stat) < 80){
        weaknesses.push({ type:"Strike-rate", detail:`Low strike-rate in ${s.matchtype}`, confidence:0.7 });
      }
      if(s.fn && s.fn.includes("average") && parseFloat(s.stat) < 35){
        weaknesses.push({ type:"Average", detail:`Low batting average in ${s.matchtype}`, confidence:0.6 });
      }
    });

    if(weaknesses.length === 0){
      weaknesses.push({ type:"Generic", detail:"No major weakness found from stats", confidence:0.4 });
    }

    dangerAgainst.push({ bowler:"Swing Bowler", reason:"Early swing troubling based on historical stats." });

    let baseScore = 70;
    if(context.pitch === 'flat') baseScore += 10;
    if(context.green === 'green') baseScore -= 8;
    if(context.weather === 'overcast') baseScore -= 6;

    const pitchScore = Math.min(95, Math.max(30, baseScore));

    const advice = [
      "Play more confidently front-foot shots on full-length balls.",
      "Improve shot selection against spin on slow wickets.",
      "Study opposition bowler patterns before match."
    ];

    return {
      name,
      summary,
      weaknesses,
      dangerAgainst,
      pitchScore,
      advice,
      meta: { generatedAt: new Date().toISOString(), usedMock:false }
    };

  } catch(e){
    return { error: "Error fetching data. Check API key or server." };
  }
}

  if(lower.includes('kohli') || lower.includes('virat')){
    summary = 'World-class chaser and textbook strokeplayer. Strong vs pace; occasionally vulnerable to short-pitched spin variations.';
    weaknesses.push({type:'Spin', detail:'Struggles early against sharp leg-spin with quicker pace and flighted carrom balls', confidence:0.78});
    weaknesses.push({type:'Short ball', detail:'Can be tempted by short-of-length deliveries in overcast conditions', confidence:0.5});
    dangerAgainst.push({bowler:'Quality wrist spinner', reason:'Drift + quicker arm speed can induce false shots'});
    baseScore = 86;
  } else if(lower.includes('rohit')){
    summary = 'Explosive opener with strong pull/sweep. Vulnerable to full-length, swinging deliveries early.';
    weaknesses.push({type:'Swing', detail:'Early swing with full length risks LBW/edge', confidence:0.72});
    weaknesses.push({type:'Bouncer', detail:'Sudden short balls can disrupt rhythm', confidence:0.45});
    dangerAgainst.push({bowler:'Skiddy seamer', reason:'Skidding inswinger at good length'});
    baseScore = 82;
  } else if(lower.includes('babar')){
    summary = 'Technically strong; prefers pace to spin but reads length well.';
    weaknesses.push({type:'Pace Variations', detail:'Struggles sometimes with lower-leg theory and bodyline tactics', confidence:0.42});
    dangerAgainst.push({bowler:'Extra-swing seamer', reason:'angles and cross-seam movement'});
    baseScore = 79;
  } else {
    summary = 'Player not in examples. Mock analysis produced using heuristics.';
    // generic weaknesses
    weaknesses.push({type:'Spin', detail:'May find wrist-spin trickier on turning tracks', confidence:0.5});
    weaknesses.push({type:'Short Ball', detail:'Possible vulnerability to short-of-length if technique not solid', confidence:0.4});
    dangerAgainst.push({bowler:'Wrist spinner', reason:'Can cause uncertainty with flight and turn'});
    baseScore = 68;
  }

  // pitch/weather impact
  let impact = 0; // positive = good for player
  if(context.pitch === 'flat') impact += 8;
  if(context.pitch === 'green') impact -= 6;
  if(context.pitch === 'dusty') impact -= 2;
  if(context.weather === 'overcast') impact -= 4;
  if(context.weather === 'humid') impact += 2;

  const pitchScore = Math.max(30, Math.min(95, baseScore + impact));

  // generate simple advice
  let advice = [];
  advice.push('Use front-foot drives early against full-length to negate swing.');
  if(weaknesses.some(w=>w.type==='Spin')) advice.push('Practice sweep & reverse-sweep against wrist-spin in nets.');
  if(weaknesses.some(w=>w.type==='Short Ball')) advice.push('Work on pull & duck-under mechanics for short-of-length.');
  advice.push('Watch recent innings of opposition bowlers for patterns; that helps pick field placements.');

  return {
    name: name,
    summary,
    weaknesses,
    dangerAgainst,
    pitchScore,
    advice,
    meta: { generatedAt: new Date().toISOString(), usedMock: true }
  };
}

// UI wiring
const analyzeBtn = document.getElementById('analyzeBtn');
const clearBtn = document.getElementById('clearBtn');
const playerNameInput = document.getElementById('playerName');
const pitchSelect = document.getElementById('pitch');
const weatherSelect = document.getElementById('weather');
const resultBox = document.getElementById('result');
const resName = document.getElementById('resName');
const resMeta = document.getElementById('resMeta');
const weaknessesEl = document.getElementById('weaknesses');
const dangerList = document.getElementById('dangerList');
const adviceEl = document.getElementById('advice');
const pitchImpact = document.getElementById('pitchImpact');
const scoreBar = document.getElementById('scoreBar');
const status = document.getElementById('status');
const copyJson = document.getElementById('copyJson');
const downloadJson = document.getElementById('downloadJson');

analyzeBtn.addEventListener('click', ()=>{
  const name = playerNameInput.value.trim();
  const pitch = pitchSelect.value;
  const weather = weatherSelect.value;
  status.textContent = 'Analyzing — generating AI-style insights...';
  // simulate network delay
  setTimeout(()=>{
    const out = mockAnalyzePlayer(name, {pitch, weather});
    if(out.error){ status.textContent = out.error; return; }
    renderResult(out);
    status.textContent = 'Done. Replace mock with your backend for real results.';
  }, 450);
});

clearBtn.addEventListener('click', ()=>{
  playerNameInput.value = '';
  resultBox.style.display = 'none';
  status.textContent = 'Cleared';
});

// sample buttons
Array.from(document.querySelectorAll('.sample')).forEach(btn=>{
  btn.addEventListener('click', ()=>{
    playerNameInput.value = btn.dataset.name;
  });
});

function renderResult(out){
  resultBox.style.display = 'block';
  resName.textContent = out.name;
  resMeta.textContent = out.summary;

  weaknessesEl.innerHTML = '';
  out.weaknesses.forEach(w=>{
    const el = document.createElement('div');
    el.style.marginBottom = '8px';
    el.innerHTML = `<strong>${w.type}</strong> — <span class="muted">${w.detail}</span> <div class="small muted">Confidence: ${(w.confidence*100).toFixed(0)}%</div>`;
    weaknessesEl.appendChild(el);
  });

  dangerList.innerHTML = '';
  out.dangerAgainst.forEach(d=>{
    const el = document.createElement('div');
    el.style.marginBottom = '8px';
    el.innerHTML = `<strong>${d.bowler}</strong> <div class="muted small">${d.reason}</div>`;
    dangerList.appendChild(el);
  });

  adviceEl.innerHTML = '';
  out.advice.forEach(a=>{
    const el = document.createElement('div');
    el.style.marginBottom = '6px';
    el.textContent = '• ' + a;
    adviceEl.appendChild(el);
  });

  pitchImpact.textContent = `Estimated performance index: ${out.pitchScore} / 100`;
  scoreBar.style.width = Math.max(6, out.pitchScore) + '%';

  // attach JSON for copy/download
  const jsonData = JSON.stringify(out, null, 2);
  copyJson.onclick = ()=>{
    navigator.clipboard.writeText(jsonData).then(()=>{
      status.textContent = 'Result JSON copied to clipboard';
    });
  };
  downloadJson.onclick = ()=>{
    const blob = new Blob([jsonData], {type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = `${out.name.replace(/\s+/g,'_')}_analysis.json`;
    document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
  };
}

</script>
</body>
</html>
