<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Professional Cricket Quiz</title>
<style>
body {
    font-family: 'Arial', sans-serif;
    background: #e0f2fe;
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
}

.quiz-container {
    background: #fff;
    padding: 25px 35px;
    border-radius: 15px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    width: 100%;
    max-width: 700px;
    text-align: center;
    position: relative;
}

h2 {
    color: #0284c7;
    margin-bottom: 10px;
}

.content-text {
    font-size: 16px;
    color: #0f172a;
    margin-bottom: 20px;
    line-height: 1.5;
}

button {
    padding: 12px 25px;
    margin: 12px 0;
    background: #0284c7;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    transition: 0.3s;
}

button:hover:enabled {
    background: #0369a1;
}

button:disabled {
    background: gray;
    cursor: not-allowed;
}

.option-btn {
    display: block;
    width: 100%;
    margin: 10px 0;
    background: #f1f5f9;
    color: #0f172a;
    border: 2px solid #0284c7;
    border-radius: 8px;
    padding: 12px;
    font-weight: bold;
    cursor: pointer;
    transition: 0.3s;
}

.option-btn:hover {
    background: #0284c7;
    color: white;
}

.timer {
    font-weight: bold;
    font-size: 18px;
    margin-bottom: 10px;
}

.timer-bar-container {
    width: 100%;
    background: #e2e8f0;
    height: 10px;
    border-radius: 5px;
    margin-bottom: 20px;
    overflow: hidden;
}

.timer-bar {
    height: 100%;
    width: 100%;
    background: #0284c7;
    transition: width 1s linear;
}

.progress-text {
    font-size: 14px;
    color: #0284c7;
    margin-bottom: 5px;
}

.score {
    font-size: 22px;
    font-weight: bold;
    color: #0284c7;
    margin-top: 20px;
}

#userForm {
    display: none;
    text-align: left;
}

#userForm input {
    width: 100%;
    padding: 10px;
    margin: 8px 0;
    border-radius: 6px;
    border: 1px solid #0284c7;
}

#userForm label {
    font-weight: bold;
    color: #0284c7;
}

/* ---- Professional start page ---- */
.start-card {
    background: linear-gradient(90deg, #0284c7, #06b6d4);
    color: white;
    border-radius: 15px;
    padding: 30px 20px;
    margin-bottom: 25px;
    text-align: center;
    box-shadow: 0 8px 20px rgba(0,0,0,0.3);
}

.start-card h1 {
    font-size: 28px;
    margin-bottom: 15px;
}

.start-card p {
    font-size: 16px;
    line-height: 1.5;
    margin-bottom: 20px;
}

.jersey-gallery {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-bottom: 20px;
}

.jersey-gallery img {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    border: 2px solid white;
}

.leaderboard-preview {
    margin-top: 25px;
    text-align: left;
    background: #f1f5f9;
    padding: 15px;
    border-radius: 10px;
}

.leaderboard-preview h3 {
    color: #0284c7;
    margin-bottom: 10px;
}

.leaderboard-preview ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.leaderboard-preview li {
    padding: 5px 0;
    border-bottom: 1px solid #ddd;
    font-weight: bold;
    color: gray;
}
</style>
<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
</head>
<body>

<div class="quiz-container" id="quizContainer">

  <!-- Start Page -->
<div class="start-card" id="startCard">
    <h1>Cricket Quiz Challenge</h1>
    <p>üéØ Answer all 50 cricket questions and challenge your knowledge! Beat the clock, score high, and be among the top 3 to win your favorite player's jersey. Are you ready? üèè</p>
    
    <div class="jersey-gallery">
        <img src="https://i.ibb.co/ymFmSr3T/jersay222.jpg" alt="Jersey 2">
    </div>

    <p><strong>Note:</strong> üìù The top 3 players will be declared based on <strong>score (50/50 first)</strong> and <strong>time taken to complete the quiz</strong>. Aim for both accuracy and speed! ‚è±Ô∏èüèè</p>

    <p><strong>Last Top Players:</strong></p>
    <div class="leaderboard-preview">
        <h3>Leaderboard</h3>
        <ul>
            <li>Vikash Mishra - 50/50</li>
            <li>Arun Khatri - 50/50</li>
            <li>Shubham Rao - 50/50</li>
        </ul>
    </div>
    <button id="startBtn">Start Quiz</button>
</div>

    <!-- User Form -->
    <form id="userForm">
        <label for="username">Name:</label>
        <input type="text" id="username" required>
        <label for="email">Email:</label>
        <input type="email" id="email" required>
        <button type="submit">Submit</button>
    </form>

</div>

<script>






// Check if already participated
const lastPlayed = localStorage.getItem("quiz_last_played");

if (lastPlayed) {
    const lastDate = new Date(parseInt(lastPlayed));
    const now = new Date();

    const diffDays = Math.floor((now - lastDate) / (1000 * 60 * 60 * 24));

    if (diffDays < 15) {
        // User is locked
        document.getElementById("startBtn").style.display = "none";

        const msg = document.createElement("p");
        msg.style.color = "red";
        msg.style.fontWeight = "bold";
        msg.style.fontSize = "18px";
        msg.textContent = `You have already participated in the quiz. You can participate again after ${15 - diffDays} days.`;
        document.getElementById("startCard").appendChild(msg);
    }
}








    
// Firebase config
const firebaseConfig = {
    apiKey: "AIzaSyClsCvupI-zY8i4lMUPOuI_kNqZvCDRs08",
    authDomain: "cricketvs-5e595.firebaseapp.com",
    projectId: "cricketvs-5e595",
    storageBucket: "cricketvs-5e595.appspot.com",
    messagingSenderId: "947578850537",
    appId: "1:947578850537:web:67d84cf056fb50b1c3f478",
    measurementId: "G-S71DWGH252"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

const quizContainer = document.getElementById('quizContainer');
const startBtn = document.getElementById('startBtn');
const userForm = document.getElementById('userForm');
const startCard = document.getElementById('startCard');

let currentQuestion = 0;
let score = 0;
let timer;
let timeLeft = 15;
let currentUser = "";
let currentEmail = "";
let startTime;

// ---- 200 Cricket Questions ----
let quizQuestionsAll = [
  // 1-50 (already shared above)
  {question: "Who won the first ever Cricket World Cup in 1975?", options: ["India","West Indies","Australia","England"], answer: "West Indies"},
  {question: "Who has scored the most Test runs in cricket history?", options: ["Ricky Ponting","Jacques Kallis","Sachin Tendulkar","Brian Lara"], answer: "Sachin Tendulkar"},
  {question: "Which bowler has taken the most wickets in Test cricket?", options: ["Shane Warne","Muttiah Muralitharan","Anil Kumble","Courtney Walsh"], answer: "Muttiah Muralitharan"},
  {question: "What is the length of a cricket pitch?", options: ["20 yards","22 yards","24 yards","26 yards"], answer: "22 yards"},
  {question: "How many players are there on each side in a cricket match?", options: ["9","10","11","12"], answer: "11"},
  {question: "Which cricketer is known as the ‚ÄòGod of Cricket‚Äô?", options: ["Brian Lara","Virat Kohli","Sachin Tendulkar","Ricky Ponting"], answer: "Sachin Tendulkar"},
  {question: "Who scored the fastest century in ODIs (as of 2025)?", options: ["Shahid Afridi","Corey Anderson","AB de Villiers","Virat Kohli"], answer: "AB de Villiers"},
  {question: "Which country won the 2019 ICC Cricket World Cup?", options: ["Australia","India","New‚ÄØZealand","England"], answer: "England"},
  {question: "Who was the first player to score 10,000 runs in ODI cricket?", options: ["Sachin Tendulkar","Kumar Sangakkara","Ricky Ponting","Jacques Kallis"], answer: "Sachin Tendulkar"},
  {question: "Which bowler has the best bowling figures in a Test match (most wickets)?", options: ["Jim Laker","Muttiah Muralitharan","Anil Kumble","Sydney Barnes"], answer: "Jim Laker"},
  {question: "Which team holds the record for the highest team total in an ODI?", options: ["Australia","England","India","South Africa"], answer: "England"},
  {question: "Who is known as the ‚ÄòUniverse Boss‚Äô in cricket?", options: ["Chris Gayle","Andre Russell","AB de Villiers","MS Dhoni"], answer: "Chris Gayle"},
  {question: "Which cricketer scored 400 not out in a Test innings?", options: ["Brian Lara","Don Bradman","Chris Gayle","Matthew Hayden"], answer: "Brian Lara"},
  {question: "Which country hosted the ICC Cricket World Cup in 2011?", options: ["India","Australia","England","South Africa"], answer: "India"},
  {question: "How many balls are there in an over in cricket?", options: ["4","5","6","8"], answer: "6"},
  {question: "What does LBW stand for?", options: ["Leg Before Wicket","Long Ball Wicket","Last Ball Wicket","Lapped Ball Wicket"], answer: "Leg Before Wicket"},
  {question: "What is a 'hat-trick' in cricket?", options: ["Three wickets in three balls","Three sixes in an over","Three centuries in series","Three run outs in a match"], answer: "Three wickets in three balls"},
  {question: "Which cricketer has taken most T20I wickets (as of 2025)?", options: ["Lasith Malinga","Shakib Al Hasan","Rashid Khan","Bhuvneshwar Kumar"], answer: "Shakib Al Hasan"},
  {question: "Which batsman hit the winning six in the 2011 World Cup final?", options: ["MS Dhoni","Gautam Gambhir","Virat Kohli","Sourav Ganguly"], answer: "MS Dhoni"},
  {question: "What is a ‚Äòmaiden over‚Äô in cricket?", options: ["No runs conceded","Only singles scored","Four runs scored","Six runs scored"], answer: "No runs conceded"},
  {question: "Which cricketer is the only one to score 100 international centuries?", options: ["Ricky Ponting","Kumar Sangakkara","Sachin Tendulkar","Virat Kohli"], answer: "Sachin Tendulkar"},
  {question: "Which cricket format uses 20 overs per side?", options: ["Test","ODI","T10","T20"], answer: "T20"},
  {question: "Which bowler dismissed Donald Bradman for a duck in his final Test innings?", options: ["Lance Gibbs","Bill O'Reilly","Glenn McGrath","James Anderson"], answer: "Lance‚ÄØGibbs"},
  {question: "Which player scored the first ever double century in Test cricket?", options: ["Don Bradman","W.G. Grace","Ricky Ponting","Brian Lara"], answer: "Don Bradman"},
  {question: "What is the maximum weight of a cricket ball in men‚Äôs international cricket?", options: ["155g","156g","163g","165g"], answer: "163g"},
  {question: "In which country was the first-ever Test match played?", options: ["Australia","England","India","South Africa"], answer: "Australia"},
  {question: "Which bowler has taken 10 wickets in a single Test innings?", options: ["Jim Laker","Muttiah Muralitharan","Anil Kumble","Sydney Barnes"], answer: "Jim Laker"},
  {question: "Who was the first female cricketer to score a century in T20 internationals?", options: ["Charlotte Edwards","Suzy‚ÄØBates","Meg Lanning","Stafanie Taylor"], answer: "Suzy Bates"},
  {question: "Which country won the first T20 World Cup?", options: ["India","Pakistan","England","West Indies"], answer: "India"},
  {question: "What does DRS stand for?", options: ["Decision Review System","Direct Run Scoring","Double Run System","Died Reckoning Score"], answer: "Decision Review System"},
  {question: "Which cricketer has the record for the fastest fifty in ODIs (as of 2025)?", options: ["AB de Villiers","Brendon McCullum","Sanath Jayasuriya","Chris Gayle"], answer: "AB de Villiers"},
  {question: "Which team has won the most Cricket World Cups (50-over)?", options: ["Australia","India","West Indies","Pakistan"], answer: "Australia"},
  {question: "Who was the captain of India when they won the 1983 World Cup?", options: ["Sunil Gavaskar","Kapil Dev","Sourav Ganguly","MS Dhoni"], answer: "Kapil Dev"},
  {question: "Which bowler delivered the fastest recorded delivery in cricket history?", options: ["Brett Lee","Shoaib Akhtar","Jeff Thomson","Shaun Tait"], answer: "Shoaib Akhtar"},
  {question: "What is a 'free hit' in cricket?", options: ["A ball where no dismissal is allowed","A ball with double runs","A ball that gives free runs","A no‚Äëball with extra run"], answer: "A ball where no dismissal is allowed"},
  {question: "Which cricketer has the most Test centuries?", options: ["Ricky Ponting","Virat Kohli","Sachin Tendulkar","Jacques Kallis"], answer: "Sachin Tendulkar"},
  {question: "Which country won the 2007 T20 World Cup?", options: ["India","Pakistan","Australia","West Indies"], answer: "India"},
  {question: "In cricket, what is a ‚Äòduck‚Äô?", options: ["Zero score by batsman","Four runs","Out from first ball","Six runs"], answer: "Zero score by batsman"},
  {question: "Which wicket‚Äëkeeper has the most dismissals in Test cricket?", options: ["Adam Gilchrist","Mark Boucher","Kumar Sangakkara","MS Dhoni"], answer: "Mark Boucher"},
  {question: "What is the width of the stumps in cricket?", options: ["9 in","8 in","10 in","11 in"], answer: "9 in"},
  {question: "Who scored the first ever triple century in Test cricket?", options: ["Don Bradman","Brian Lara","Virender Sehwag","Chris Gayle"], answer: "Don Bradman"},
  {question: "Which cricketer famously declared his retirement after scoring 200* in an ODI?", options: ["Sachin Tendulkar","Virender Sehwag","Chris Gayle","Martin Guptill"], answer: "Martin Guptill"},
  {question: "Which team won the 2015 Cricket World Cup?", options: ["India","Australia","New‚ÄØZealand","South Africa"], answer: "Australia"},
  {question: "What does ‚Äòpowerplay‚Äô mean in limited overs cricket?", options: ["Fielding restrictions","Free hits","Bonus runs","Extra overs"], answer: "Fielding restrictions"},
  {question: "Which bowler has the most hat-tricks in international cricket (all formats)?", options: ["Lasith Malinga","Wasim Akram","Brett Lee","Zaheer Khan"], answer: "Lasith Malinga"},
  {question: "Who is the first batsman to score a century in all three formats (Test, ODI, T20)?", options: ["Brendon McCullum","Chris Gayle","Suresh Raina","AB de Villiers"], answer: "Chris Gayle"},
  {question: "Which cricketer scored 100 international centuries?", options: ["Ricky Ponting","Kumar Sangakkara","Sachin Tendulkar","Virat Kohli"], answer: "Sachin Tendulkar"},
  {question: "Which country has won the most ICC T20 World Cups as of 2025?", options: ["West Indies","India","England","Pakistan"], answer: "West Indies"},
  {question: "How many stumps are there in cricket wicket?", options: ["2","3","4","5"], answer: "3"},
  {question: "Which bowler has taken 800 Test wickets?", options: ["Muttiah Muralitharan","Shane Warne","Anil Kumble","James Anderson"], answer: "Muttiah Muralitharan"},
  {question: "What is the diameter of a cricket boundary minimum?", options: ["50 yards","60 yards","70 yards","80 yards"], answer: "60 yards"},
    {question: "Which country won the 1992 Cricket World Cup?", options: ["Pakistan","India","England","Australia"], answer: "Pakistan"},
  {question: "Who is the first bowler to take 500 ODI wickets?", options: ["Wasim Akram","Muttiah Muralitharan","Glenn McGrath","Chaminda Vaas"], answer: "Muttiah Muralitharan"},
  {question: "Who scored the first double century in ODIs?", options: ["Sachin Tendulkar","Virender Sehwag","Rohit Sharma","Martin Guptill"], answer: "Sachin Tendulkar"},
  {question: "Which player has hit the most sixes in T20 internationals?", options: ["Chris Gayle","Martin Guptill","Rashid Khan","AB de Villiers"], answer: "Chris Gayle"},
  {question: "Which team has won the most T20 World Cups?", options: ["India","West Indies","England","Pakistan"], answer: "West Indies"},
  {question: "Who is the fastest player to reach 10,000 ODI runs?", options: ["Sachin Tendulkar","Virat Kohli","Ricky Ponting","Brian Lara"], answer: "Virat Kohli"},
  {question: "Who was the first player to score a century in all three formats?", options: ["Chris Gayle","AB de Villiers","Brendon McCullum","Suresh Raina"], answer: "Chris Gayle"},
  {question: "Which bowler has the record for most wickets in World Cup history?", options: ["Glenn McGrath","Muttiah Muralitharan","Wasim Akram","Shaun Pollock"], answer: "Glenn McGrath"},
  {question: "Which cricketer scored 264 runs in a single Test innings, the highest at that time?", options: ["Brian Lara","Don Bradman","Matthew Hayden","Chris Gayle"], answer: "Brian Lara"},
  {question: "Who captained India to the 2007 T20 World Cup victory?", options: ["MS Dhoni","Sourav Ganguly","Rahul Dravid","Virender Sehwag"], answer: "MS Dhoni"},
  {question: "Who has the highest batting average in Test cricket history?", options: ["Ricky Ponting","Steve Smith","Don Bradman","Kumar Sangakkara"], answer: "Don Bradman"},
  {question: "Which country won the 2010 ICC World Twenty20?", options: ["England","Pakistan","Australia","India"], answer: "England"},
  {question: "Who took the most wickets in the 2019 Cricket World Cup?", options: ["Mitchell Starc","Jasprit Bumrah","Kagiso Rabada","Pat Cummins"], answer: "Mitchell Starc"},
  {question: "Who holds the record for fastest century in T20 internationals?", options: ["Chris Gayle","David Miller","Shahid Afridi","Yuvraj Singh"], answer: "David Miller"},
  {question: "Which player scored 438 runs in a Test series against England in 2012?", options: ["Alastair Cook","Sachin Tendulkar","Kevin Pietersen","Hashim Amla"], answer: "Kevin Pietersen"},
  {question: "Which cricketer has the most ODI centuries?", options: ["Ricky Ponting","Sachin Tendulkar","Virat Kohli","Kumar Sangakkara"], answer: "Sachin Tendulkar"},
  {question: "Who has the record for most wickets in IPL history?", options: ["Lasith Malinga","Dwayne Bravo","Sunil Narine","Bhuvneshwar Kumar"], answer: "Lasith Malinga"},
  {question: "Who is the only player to score 200 in ODIs more than once?", options: ["Rohit Sharma","Martin Guptill","Chris Gayle","Sachin Tendulkar"], answer: "Rohit Sharma"},
  {question: "Which country won the 1987 Cricket World Cup?", options: ["Australia","India","Pakistan","England"], answer: "Australia"},
  {question: "Who is the fastest bowler to take 300 Test wickets?", options: ["Glenn McGrath","Shane Warne","Dale Steyn","Anil Kumble"], answer: "Dale Steyn"},
  {question: "Who scored the first century in T20 internationals?", options: ["Brendon McCullum","Chris Gayle","Suresh Raina","Rohit Sharma"], answer: "Chris Gayle"},
  {question: "Which cricketer is called 'Mr. 360'?", options: ["AB de Villiers","Virat Kohli","MS Dhoni","Rohit Sharma"], answer: "AB de Villiers"},
  {question: "Who was the top scorer in the 2011 Cricket World Cup?", options: ["Sachin Tendulkar","Yuvraj Singh","Tillakaratne Dilshan","Chris Gayle"], answer: "Tillakaratne Dilshan"},
  {question: "Which bowler has the best economy rate in T20 internationals?", options: ["Rashid Khan","Shakib Al Hasan","Sunil Narine","Mitchell Starc"], answer: "Sunil Narine"},
  {question: "Who is the youngest cricketer to score an ODI century?", options: ["Mohammad Ashraful","Sachin Tendulkar","Shahid Afridi","Rohit Sharma"], answer: "Mohammad Ashraful"},
  {question: "Which team won the first-ever ICC Champions Trophy in 1998?", options: ["India","South Africa","Sri Lanka","Australia"], answer: "Sri Lanka"},
  {question: "Who is the only bowler to take two hat-tricks in a single ODI series?", options: ["Lasith Malinga","Brett Lee","Waqar Younis","Shahid Afridi"], answer: "Lasith Malinga"},
  {question: "Who was the leading run scorer in the 2015 Cricket World Cup?", options: ["Martin Guptill","Steve Smith","Kane Williamson","AB de Villiers"], answer: "Martin Guptill"},
  {question: "Which cricketer has taken the most catches in Test cricket?", options: ["Mahela Jayawardene","Mark Waugh","Rahul Dravid","Jacques Kallis"], answer: "Rahul Dravid"},
  {question: "Who is the only player to score a century in first match of all three formats?", options: ["Suresh Raina","Brendon McCullum","Chris Gayle","AB de Villiers"], answer: "Chris Gayle"},
  {question: "Which Indian bowler took 10 wickets in a Test innings?", options: ["Anil Kumble","Kapil Dev","Ishant Sharma","Ravichandran Ashwin"], answer: "Anil Kumble"},
  {question: "Who has the fastest fifty in IPL history?", options: ["Chris Gayle","Andre Russell","Rohit Sharma","AB de Villiers"], answer: "Chris Gayle"},
  {question: "Which bowler has the record for most wickets in World T20 history?", options: ["Lasith Malinga","Shakib Al Hasan","Rashid Khan","Dwayne Bravo"], answer: "Lasith Malinga"},
  {question: "Who hit six sixes in an over in an international match first?", options: ["Yuvraj Singh","Herschelle Gibbs","Kieron Pollard","Ravi Shastri"], answer: "Herschelle Gibbs"},
  {question: "Which country won the 2012 ICC World Twenty20?", options: ["West Indies","Sri Lanka","India","Pakistan"], answer: "West Indies"},
  {question: "Who is the oldest cricketer to score an ODI century?", options: ["Sanath Jayasuriya","MS Dhoni","Jacques Kallis","Chris Gayle"], answer: "Sanath Jayasuriya"},
  {question: "Which cricketer has the record for the highest partnership in Tests?", options: ["Kumar Sangakkara & Mahela Jayawardene","Rahul Dravid & VVS Laxman","Chris Gayle & Marlon Samuels","Don Bradman & Bill Ponsford"], answer: "Kumar Sangakkara & Mahela Jayawardene"},
  {question: "Who was the first bowler to take a five-wicket haul in all three formats?", options: ["Lasith Malinga","Rashid Khan","Shahid Afridi","Anil Kumble"], answer: "Lasith Malinga"},
  {question: "Who is the youngest player to captain India in ODIs?", options: ["MS Dhoni","Virat Kohli","Rohit Sharma","Sourav Ganguly"], answer: "MS Dhoni"},
  {question: "Which cricketer has scored the most runs in T20 internationals?", options: ["Virat Kohli","Martin Guptill","Chris Gayle","AB de Villiers"], answer: "Virat Kohli"},
  {question: "Who was the leading wicket-taker in the 2011 Cricket World Cup?", options: ["Lasith Malinga","Shahid Afridi","Shane Watson","Yuvraj Singh"], answer: "Lasith Malinga"},
  {question: "Who has the record for most consecutive ODI centuries?", options: ["Saeed Anwar","Virat Kohli","Rohit Sharma","AB de Villiers"], answer: "Saeed Anwar"},
  {question: "Which bowler has the best figures in a T20I match?", options: ["Ajantha Mendis","Deepak Chahar","Rashid Khan","Shahid Afridi"], answer: "Deepak Chahar"},
  {question: "Which team won the ICC Cricket World Cup in 1999?", options: ["Australia","Pakistan","India","New Zealand"], answer: "Australia"},
  {question: "Who is the only cricketer to score 50+ centuries in both Test and ODI?", options: ["Ricky Ponting","Sachin Tendulkar","Virat Kohli","Kumar Sangakkara"], answer: "Sachin Tendulkar"},
  {question: "Which cricketer has the highest strike rate in T20 internationals?", options: ["Andre Russell","Chris Gayle","MS Dhoni","Glenn Maxwell"], answer: "Andre Russell"},
  {question: "Who was the fastest batsman to reach 1,000 ODI runs?", options: ["Viv Richards","Desmond Haynes","Virat Kohli","Rohit Sharma"], answer: "Viv Richards"},
  {question: "Which Indian bowler has the best economy in T20 World Cups?", options: ["Rashid Khan","Bhuvneshwar Kumar","Yuzvendra Chahal","Deepak Chahar"], answer: "Bhuvneshwar Kumar"},
  {question: "Which batsman holds the record for most runs in a single IPL season?", options: ["Virat Kohli","David Warner","Chris Gayle","AB de Villiers"], answer: "Virat Kohli"},
  {question: "Who took a hat-trick in the 2019 Cricket World Cup?", options: ["Kuldeep Yadav","Mohammed Shami","Jofra Archer","Trent Boult"], answer: "Mohammed Shami"},
  {question: "Which cricketer scored a century in the first-ever T20 World Cup final?", options: ["Chris Gayle","Brendon McCullum","Kumar Sangakkara","Yuvraj Singh"], answer: "Chris Gayle"},
  {question: "Who is the leading wicket-taker in ODI history?", options: ["Muttiah Muralitharan","Glenn McGrath","Wasim Akram","Chaminda Vaas"], answer: "Muttiah Muralitharan"},
  {question: "Which Indian cricketer has the highest individual score in Test cricket?", options: ["Virender Sehwag","VVS Laxman","Rahul Dravid","Sachin Tendulkar"], answer: "Virender Sehwag"},
  {question: "Which bowler has the fastest 100 ODI wickets record?", options: ["Waqar Younis","Brett Lee","Shane Bond","Saqlain Mushtaq"], answer: "Brett Lee"},
  {question: "Who is the leading run-scorer in IPL history?", options: ["Virat Kohli","Suresh Raina","David Warner","Shikhar Dhawan"], answer: "Virat Kohli"},
  {question: "Which cricketer has the fastest 50 in T20 World Cups?", options: ["Chris Gayle","Brendon McCullum","AB de Villiers","Andre Russell"], answer: "Brendon McCullum"},
  {question: "Which bowler has the record for most wickets in a single IPL season?", options: ["Dwayne Bravo","Sunil Narine","Bhuvneshwar Kumar","Lasith Malinga"], answer: "Dwayne Bravo"},
  {question: "Which batsman scored the most runs in a single Cricket World Cup?", options: ["Sachin Tendulkar","Martin Guptill","Kumar Sangakkara","Chris Gayle"], answer: "Sachin Tendulkar"},
  {question: "Which cricketer has the record for most sixes in ODI history?", options: ["Chris Gayle","Rohit Sharma","Shahid Afridi","MS Dhoni"], answer: "Rohit Sharma"},
  {question: "Who has the record for the fastest double century in ODIs?", options: ["Virat Kohli","Rohit Sharma","Chris Gayle","Martin Guptill"], answer: "Rohit Sharma"},
  {question: "Who was the first captain to win the ICC T20 World Cup twice?", options: ["MS Dhoni","Stephen Fleming","Ricky Ponting","Graeme Smith"], answer: "MS Dhoni"},
  {question: "Which player has the most runs in a single IPL match?", options: ["Chris Gayle","Brendon McCullum","AB de Villiers","David Warner"], answer: "Chris Gayle"},
  {question: "Who holds the record for most wickets in a single Cricket World Cup?", options: ["Glenn McGrath","Muttiah Muralitharan","Lasith Malinga","Brett Lee"], answer: "Glenn McGrath"},
  {question: "Who was the first player to score a century in the IPL?", options: ["Brendon McCullum","Chris Gayle","Robin Uthappa","David Warner"], answer: "Brendon McCullum"},
  {question: "Which cricketer has the fastest 1000 runs in IPL history?", options: ["Shikhar Dhawan","Rohit Sharma","Chris Gayle","David Warner"], answer: "Shikhar Dhawan"},
  {question: "Who holds the record for most runs in a single T20I series?", options: ["Martin Guptill","Chris Gayle","Virat Kohli","AB de Villiers"], answer: "Virat Kohli"},
  {question: "Which bowler has the record for the best figures in a single World Cup match?", options: ["Glenn McGrath","Chaminda Vaas","Lasith Malinga","Mitchell Starc"], answer: "Chaminda Vaas"},
  {question: "Who is the first cricketer to play 500 ODIs?", options: ["Sachin Tendulkar","Ricky Ponting","MS Dhoni","Jacques Kallis"], answer: "Sachin Tendulkar"},
  {question: "Who has the highest number of catches in ODI cricket?", options: ["Mahela Jayawardene","Rahul Dravid","Jacques Kallis","Kumar Sangakkara"], answer: "Kumar Sangakkara"},
  {question: "Which Indian player scored the fastest fifty in T20 internationals?", options: ["Rohit Sharma","KL Rahul","Suresh Raina","Hardik Pandya"], answer: "Rohit Sharma"},
  {question: "Which cricketer has scored the most centuries in IPL history?", options: ["Chris Gayle","Virat Kohli","David Warner","Shikhar Dhawan"], answer: "Chris Gayle"},
  {question: "Who holds the record for most ducks in Test cricket?", options: ["Muttiah Muralitharan","Courtney Walsh","Wasim Akram","Kapil Dev"], answer: "Courtney Walsh"},
  {question: "Which player has the highest strike rate in ODI cricket history?", options: ["AB de Villiers","MS Dhoni","Andre Russell","Chris Gayle"], answer: "AB de Villiers"},
  {question: "Who scored the first century in women's cricket World Cup?", options: ["Mithali Raj","Belinda Clark","Charlotte Edwards","Karen Rolton"], answer: "Belinda Clark"},
  {question: "Which bowler has taken the fastest five-wicket haul in ODIs?", options: ["Glenn McGrath","Ajantha Mendis","Brett Lee","Lasith Malinga"], answer: "Brett Lee"},
  {question: "Which team won the ICC Champions Trophy in 2017?", options: ["India","Pakistan","England","Australia"], answer: "Pakistan"},
  {question: "Who is the only cricketer to hit 100 sixes in a single IPL season?", options: ["Chris Gayle","Andre Russell","AB de Villiers","MS Dhoni"], answer: "Chris Gayle"},
  {question: "Who has scored the fastest T20I century for India?", options: ["Rohit Sharma","Suresh Raina","Virat Kohli","KL Rahul"], answer: "Rohit Sharma"},
  {question: "Which cricketer has the most career runs in T20 leagues worldwide?", options: ["Chris Gayle","David Warner","Virat Kohli","AB de Villiers"], answer: "Chris Gayle"},
  {question: "Who is the first bowler to take 100 wickets in IPL history?", options: ["Lasith Malinga","Dwayne Bravo","Sunil Narine","Bhuvneshwar Kumar"], answer: "Lasith Malinga"},
  {question: "Which cricketer has played the most Tests for India?", options: ["Sachin Tendulkar","Rahul Dravid","Anil Kumble","Kapil Dev"], answer: "Sachin Tendulkar"},
];





    
// ---- Pick 50 random questions per user ----
let quizQuestions = quizQuestionsAll.sort(() => 0.5 - Math.random()).slice(0,50);

// ---- Start Button ----
startBtn.addEventListener('click', () => {
   localStorage.setItem("quiz_last_played", Date.now());
    
    startCard.style.display = 'none';
    userForm.style.display = 'block';
});

// ---- Form Submit ----
userForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const name = document.getElementById('username').value.trim();
    const email = document.getElementById('email').value.trim();
    if(!name || !email) return alert("Please enter both name and email");

    // Regex check (optional)
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if(!emailRegex.test(email)) return alert("Please enter a valid email address");


    

    currentUser = name;
    currentEmail = email;

    const querySnapshot = await db.collection("user").where("email", "==", email).get();
    if(!querySnapshot.empty){
        const docData = querySnapshot.docs[0].data();
        if(docData.quizComplete){
            userForm.style.display = 'none';
            startCard.style.display = 'block';
            startBtn.disabled = true;
            startBtn.textContent = "Better Luck Next Time";
            return;
        }
    }

    await db.collection("user").add({
        name: name,
        email: email,
        quizComplete: false,
        timestamp: firebase.firestore.FieldValue.serverTimestamp()
    });
  
    userForm.style.display = 'none';
    startTime = new Date(); // Start total timer
    showQuestion();
});
    
  function startQuiz() {
        localStorage.setItem("quiz_last_played", Date.now());
        showQuestion();
    }
    
// ---- Show Question ----
function showQuestion() {
    if(currentQuestion >= quizQuestions.length){
        showScore();
        return;
    }
    const q = quizQuestions[currentQuestion];
    const optionsShuffled = q.options.sort(() => 0.5 - Math.random());

    quizContainer.innerHTML = `
        <div style="text-align:left; font-weight:bold; margin-bottom:10px;">Player: ${currentUser}</div>
        <div class="progress-text">Question ${currentQuestion + 1} / ${quizQuestions.length}</div>
        <div class="timer-bar-container"><div class="timer-bar" id="timerBar"></div></div>
        <div class="timer" id="timer">Time Left: 15s</div>
        <h3>${q.question}</h3>
        <button class="option-btn">${optionsShuffled[0]}</button>
        <button class="option-btn">${optionsShuffled[1]}</button>
        <button class="option-btn">${optionsShuffled[2]}</button>
        <button class="option-btn">${optionsShuffled[3]}</button>
    `;
    const optionBtns = document.querySelectorAll('.option-btn');
    optionBtns.forEach(btn => btn.addEventListener('click', () => checkAnswer(btn.textContent)));

    timeLeft = 15;
    const timerBar = document.getElementById('timerBar');
    document.getElementById('timer').textContent = `Time Left: ${timeLeft}s`;
    clearInterval(timer);
    timer = setInterval(() => {
        timeLeft--;
        document.getElementById('timer').textContent = `Time Left: ${timeLeft}s`;
        timerBar.style.width = `${(timeLeft/15)*100}%`;
        if(timeLeft <= 0){
            clearInterval(timer);
            currentQuestion++;
            showQuestion();
        }
    }, 1000);
}

// ---- Check Answer ----
async function checkAnswer(selected) {
    const correct = quizQuestions[currentQuestion].answer;
    if(selected === correct) score++;
    clearInterval(timer);
    currentQuestion++;
    showQuestion();
}

// ---- Show Score ----
// ---- Show Score ----
async function showScore() {
    const endTime = new Date();
    const timeTaken = Math.floor((endTime - startTime)/1000); // in seconds

    const querySnapshot = await db.collection("user").where("email", "==", currentEmail).get();
    let docId;
    if(!querySnapshot.empty){
        docId = querySnapshot.docs[0].id;
        await db.collection("user").doc(docId).update({ quizComplete: true, score: score, timeTaken: timeTaken });
    }

    let message = "";
    if(score === quizQuestions.length){
        message = `<h2>Well done! üéâ</h2>
                   <p class="score">You have successfully passed the quiz with 50/50!</p>
                   <p class="score">Your rank will be updated and sent to your email: ${currentEmail}</p>`;
    } else {
        message = `<h2>Better Luck Next Time! üò¢</h2>
                   <p class="score">You scored ${score} / ${quizQuestions.length}.</p>`;
    }

    quizContainer.innerHTML = `
        ${message}
        <p class="score">Time Taken: ${Math.floor(timeTaken/60)} min ${timeTaken % 60} sec</p>
        <p class="score">You will be redirected shortly...</p>
    `;

    // Redirect after 5 seconds
    setTimeout(() => {
        window.location.href = "https://cricketvs.online/";
    }, 10000);
}

</script>
</body>
</html>
