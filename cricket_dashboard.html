<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Player Search With CricAPI</title>

<style>
    body { font-family: Arial, sans-serif; background: #f1f5f9; padding: 20px; }
    .box { max-width: 600px; margin: auto; background: #fff; padding: 20px;
           border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    input {
        width: 100%; padding: 10px; margin-bottom: 10px;
        border-radius: 5px; border: 1px solid #bbb;
    }
    button {
        padding: 10px 15px; background: #0284c7; color: white;
        border-radius: 5px; border: none; cursor: pointer;
    }
    button:hover { background: #0369a1; }
    .result-box {
        margin-top: 20px; padding: 15px; background: #e2e8f0;
        border-radius: 8px;
    }
</style>

</head>
<body>

<div class="box">
    <h2>Search Cricket Player</h2>

    <input type="text" id="playerName" placeholder="Enter player name...">
    <button onclick="searchPlayer()">Search</button>

    <div id="result"></div>
</div>

<script>
const API_KEY = "YOUR_API_KEY"; // Replace with your CricAPI Key

// SEARCH PLAYER â†’ GET PLAYER PID
function searchPlayer() {
    const name = document.getElementById("playerName").value.trim();
    if(name === "") {
        alert("Please enter a player name");
        return;
    }

    document.getElementById("result").innerHTML = "<p>Searching...</p>";

    // Dummy Search URL
    const searchUrl = `https://api.cricapi.com/v1/players?apikey=${API_KEY}&search=${name}`;

    fetch(searchUrl)
    .then(res => res.json())
    .then(data => {
        if (!data.data || data.data.length === 0) {
            document.getElementById("result").innerHTML = "<p>No player found</p>";
            return;
        }

        const player = data.data[0]; // first matched player
        getPlayerDetails(player.id);
    })
    .catch(err => {
        console.log(err);
        document.getElementById("result").innerHTML = "<p>Error fetching player</p>";
    });
}

// GET FULL PLAYER STATS BY PID + NEXT MATCH
function getPlayerDetails(pid) {
    document.getElementById("result").innerHTML = "<p>Loading Player Details...</p>";

    // Dummy Stats URL
    const statsUrl = `https://api.cricapi.com/v1/players_info?apikey=${API_KEY}&id=${pid}`;

    fetch(statsUrl)
    .then(res => res.json())
    .then(info => {
        const p = info.data;

        // Dummy next match (Replace with API response)
        const nextMatch = p.nextMatch || {
            teams: "India vs Australia",
            date: "20 Nov 2025"
        };

        // Display Player Details
        document.getElementById("result").innerHTML = `
            <div class="result-box">
                <h3>${p.name}</h3>
                <p><strong>Country:</strong> ${p.country}</p>
                <p><strong>Born:</strong> ${p.dateOfBirth}</p>
                <p><strong>Role:</strong> ${p.role}</p>
                <p><strong>Batting Style:</strong> ${p.battingStyle}</p>
                <p><strong>Bowling Style:</strong> ${p.bowlingStyle}</p>
                <hr>
                <h3>Career Batting Stats</h3>
                <p><strong>Matches:</strong> ${p.stats?.batting?.matches || "N/A"}</p>
                <p><strong>Runs:</strong> ${p.stats?.batting?.runs || "N/A"}</p>
                <p><strong>Average:</strong> ${p.stats?.batting?.average || "N/A"}</p>
                <hr>
                <h3>Career Bowling Stats</h3>
                <p><strong>Matches:</strong> ${p.stats?.bowling?.matches || "N/A"}</p>
                <p><strong>Wickets:</strong> ${p.stats?.bowling?.wickets || "N/A"}</p>
                <p><strong>Economy:</strong> ${p.stats?.bowling?.economy || "N/A"}</p>
                <hr>
                <h3>Next Match</h3>
                <p><strong>Teams:</strong> ${nextMatch.teams}</p>
                <p><strong>Date:</strong> ${nextMatch.date}</p>
            </div>
        `;
    })
    .catch(err => {
        console.log(err);
        document.getElementById("result").innerHTML = "<p>Error loading player details</p>";
    });
}
</script>

</body>
</html>
