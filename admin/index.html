<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CricketVS Admin Panel</title>

<style>
:root {
  --primary: #0369a1;
  --bg: #f8fafc;
  --text: #0f172a;
  --card: #ffffff;
  --muted: #6b7280;
}

body {
  margin: 0;
  font-family: system-ui, -apple-system, Roboto, Arial;
  background: var(--bg);
  color: var(--text);
  display: flex;
  height: 100vh;
  overflow: hidden;
}

.sidebar {
  width: 240px;
  background: var(--primary);
  color: #fff;
  display: flex;
  flex-direction: column;
  padding: 20px;
}

.sidebar h2 {
  margin: 0 0 20px 0;
  font-size: 22px;
}

.sidebar a {
  color: #e0f2fe;
  text-decoration: none;
  display: block;
  padding: 10px 0;
  border-radius: 6px;
}

.sidebar a:hover,
.sidebar a.active {
  background: rgba(255, 255, 255, 0.15);
}

.main {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
}

.card {
  background: var(--card);
  padding: 16px;
  border-radius: 10px;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.08);
  margin-bottom: 16px;
}

.btn {
  padding: 8px 12px;
  border: 0;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 600;
}

.btn-primary {
  background: var(--primary);
  color: #fff;
}

.btn-danger {
  background: #ef4444;
  color: #fff;
}

.btn-secondary {
  background: #e2e8f0;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 12px;
}

th,
td {
  padding: 10px;
  border-bottom: 1px solid #e5e7eb;
  text-align: left;
}

.hidden {
  display: none;
}

textarea,
input {
  width: 100%;
  padding: 8px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  margin-top: 6px;
}
</style>
</head>

<body>

<div id="admin-panel" style="display:flex; width:100%;">
  <div class="sidebar">
    <h2>CricketVS Admin</h2>

    <a href="#" class="active" onclick="showSection('news')">üì∞ News</a>
    <a href="#" onclick="showSection('iplnews')">üèè IPL News</a>
    <a href="#" onclick="showSection('spotlight')">‚ú® Spotlight</a>
    <a href="#" onclick="showSection('opinion')">üí¨ Opinion</a>
    <a href="#" onclick="showSection('special')">‚≠ê Special</a>
<a href="#" onclick="showSection('player')">üéØ Players</a>
<a href="#" onclick="showSection('preview')">üí¨ Preview</a>
    
    <a href="#" onclick="showSection('users')">üë• Users</a>
    <a href="#" onclick="showSection('settings')">‚öôÔ∏è Settings</a>
    <a href="https://webvss.github.io/cricketvs/" target="_blank">üåê View Site</a>

    <a href="#" onclick="logout()" style="margin-top:auto;color:#fecaca;">üö™ Logout</a>
  </div>

  <div class="main">

    <!-- NEWS -->
    <section id="news-section" class="section">
      <div class="card">
        <h3>üì∞ Add News</h3>
        <form id="news-form">
          <input id="n-title" placeholder="Title (English)" required />
          <textarea id="n-content" rows="4" placeholder="Content (English)"></textarea>

          <input id="n-title-hi" placeholder="‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï (Hindi)" required />
          <textarea id="n-content-hi" rows="4" placeholder="‡§∏‡§Æ‡§æ‡§ö‡§æ‡§∞ ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä (Hindi)"></textarea>

          <input id="n-imageurl" placeholder="Image Url" required />

          <div style="margin-top:8px; display:flex; gap:8px; justify-content:flex-end;">
            <button type="submit" class="btn btn-primary">Save</button>
            <button type="button" id="clear-form" class="btn btn-secondary">Clear</button>
          </div>
        </form>
      </div>

      <div class="card">
        <h3>All News</h3>
        <table id="news-table">
          <thead>
            <tr>
              <th>Title</th>
              <th>Date</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- IPL NEWS -->
    <section id="iplnews-section" class="section hidden">
      <div class="card">
        <h3>üèè Add IPL News</h3>
        <form id="iplnews-form">
          <input id="ipl-title" placeholder="Title (English)" required />
          <textarea id="ipl-content" rows="4" placeholder="Content (English)"></textarea>

          <input id="ipl-title-hi" placeholder="‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï (Hindi)" required />
          <textarea id="ipl-content-hi" rows="4" placeholder="‡§∏‡§Æ‡§æ‡§ö‡§æ‡§∞ ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä (Hindi)"></textarea>

          <input id="ipl-imageurl" placeholder="Image Url" required />

          <div style="margin-top:8px; display:flex; gap:8px; justify-content:flex-end;">
            <button type="submit" class="btn btn-primary">Save</button>
            <button type="button" id="clear-iplform" class="btn btn-secondary">Clear</button>
          </div>
        </form>
      </div>

      <div class="card">
        <h3>All IPL News</h3>
        <table id="iplnews-table">
          <thead>
            <tr>
              <th>Title</th>
              <th>Date</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    
<!-- SPOTLIGHT -->
<section id="spotlight-section" class="section hidden">
  <div class="card">
    <h3>‚ú® Add Spotlight</h3>
    <form id="spotlight-form">
      <input id="s-title" placeholder="Title (English)" required />
      <textarea id="s-content" rows="4" placeholder="Content (English)"></textarea>

      <input id="s-title-hi" placeholder="‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï (Hindi)" required />
      <textarea id="s-content-hi" rows="4" placeholder="‡§∏‡§Æ‡§æ‡§ö‡§æ‡§∞ ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä (Hindi)"></textarea>

      <input id="s-imageurl" placeholder="Image Url" required />

      <div style="margin-top:8px; display:flex; gap:8px; justify-content:flex-end;">
        <button type="submit" class="btn btn-primary">Save</button>
        <button type="button" id="clear-spotlightform" class="btn btn-secondary">Clear</button>
      </div>
    </form>
  </div>

  <div class="card">
    <h3>All Spotlight</h3>
    <table id="spotlight-table">
      <thead>
        <tr>
          <th>Title</th>
          <th>Date</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</section>
    <!-- OPINION -->
<section id="opinion-section" class="section hidden">
  <div class="card">
    <h3>üí¨ Add Opinion</h3>
    <form id="opinion-form">
      <input id="o-title" placeholder="Title (English)" required />
      <textarea id="o-content" rows="4" placeholder="Opinion Content (English)"></textarea>

      <input id="o-title-hi" placeholder="‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï (Hindi)" required />
      <textarea id="o-content-hi" rows="4" placeholder="‡§∏‡§Æ‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä (Hindi)"></textarea>

      <input id="o-author" placeholder="Author Name" required />

      <input id="o-imageurl" placeholder="Image Url" required />
      

      <div style="margin-top:8px; display:flex; gap:8px; justify-content:flex-end;">
        <button type="submit" class="btn btn-primary">Save</button>
        <button type="button" id="clear-opinionform" class="btn btn-secondary">Clear</button>
      </div>
    </form>
  </div>

  <div class="card">
    <h3>All Opinions</h3>
    <table id="opinion-table">
      <thead>
        <tr>
          <th>Title</th>
          <th>Author</th>
          <th>Date</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</section>

<!-- PLAYER -->
<section id="player-section" class="section hidden">
  <div class="card">
    <h3>üéØ Add Player</h3>
    <form id="player-form">

      <input id="p-name" placeholder="Player Name (English)" required />
      <textarea id="p-info" rows="4" placeholder="Player Info (English)" required></textarea>

      <input id="p-name-hi" placeholder="‡§ñ‡§ø‡§≤‡§æ‡§°‡§º‡•Ä ‡§ï‡§æ ‡§®‡§æ‡§Æ (Hindi)" required />
      <textarea id="p-info-hi" rows="4" placeholder="‡§ñ‡§ø‡§≤‡§æ‡§°‡§º‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä (Hindi)" required></textarea>

      <input id="p-imageurl" placeholder="Image Url" required />

      <div style="margin-top:8px; display:flex; gap:8px; justify-content:flex-end;">
        <button type="submit" class="btn btn-primary">Save</button>
        <button type="button" id="clear-playerform" class="btn btn-secondary">Clear</button>
      </div>
    </form>
  </div>

  <div class="card">
    <h3>All Players</h3>
    <table id="player-table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Date</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</section>





<!-- PREVIEW -->
<section id="player-section" class="section hidden">
  <div class="card">
    <h3>üéØ Add Preview</h3>
    <form id="preview-form">

      <input id="pw-name" placeholder="Preview Name (English)" required />
      <textarea id="pw-info" rows="4" placeholder="Preview Info (English)" required></textarea>

      <input id="pw-name-hi" placeholder="‡§ñ‡§ø‡§≤‡§æ‡§°‡§º‡•Ä ‡§ï‡§æ ‡§®‡§æ‡§Æ (Hindi)" required />
      <textarea id="pw-info-hi" rows="4" placeholder="‡§ñ‡§ø‡§≤‡§æ‡§°‡§º‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä (Hindi)" required></textarea>

      <input id="pw-imageurl" placeholder="Image Url" required />

      <div style="margin-top:8px; display:flex; gap:8px; justify-content:flex-end;">
        <button type="submit" class="btn btn-primary">Save</button>
        <button type="button" id="clear-playerform" class="btn btn-secondary">Clear</button>
      </div>
    </form>
  </div>

  <div class="card">
    <h3>All Preview</h3>
    <table id="preview-table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Date</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</section>

    

    
    <!-- SPECIAL NEWS -->
<section id="special-section" class="section hidden">
  <div class="card">
    <h3>‚≠ê Add Special News</h3>
    <form id="special-form">
      
      <input id="sp-title" placeholder="Title (English)" required />
      <textarea id="sp-content" rows="4" placeholder="Content (English)"></textarea>

      <input id="sp-title-hi" placeholder="‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï (Hindi)" required />
      <textarea id="sp-content-hi" rows="4" placeholder="‡§∏‡§Æ‡§æ‡§ö‡§æ‡§∞ ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä (Hindi)"></textarea>

      <input id="sp-imageurl" placeholder="Image Url" required />

      <div style="margin-top:8px; display:flex; gap:8px; justify-content:flex-end;">
        <button type="submit" class="btn btn-primary">Save</button>
        <button type="button" id="clear-specialform" class="btn btn-secondary">Clear</button>
      </div>
    </form>
  </div>

  <div class="card">
    <h3>All Special News</h3>
    <table id="special-table">
      <thead>
        <tr>
          <th>Title</th>
          <th>Date</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</section>

    <!-- USERS -->
    <section id="users-section" class="section hidden">
      <div class="card">
        <h3>üë• User Management</h3>
        <table id="users-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Email</th>
              <th>Score</th>
              <th>Time</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- SETTINGS -->
    <section id="settings-section" class="section hidden">
      <div class="card">
        <h3>‚öôÔ∏è Settings</h3>
        <p>Logo upload coming soon.</p>
      </div>
    </section>

  </div>
</div>


<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>

<script>
const token = localStorage.getItem("cp_admin_token");
if (!token) { window.location.href = "/admin/login.html"; }

function logout() {
  localStorage.removeItem("cp_admin_token");
  window.location.href = "/admin/login.html";
}

// FIREBASE CONFIG
const firebaseConfig = {
  apiKey: "AIzaSyClsCvupI-zY8i4lMUPOuI_kNqZvCDRs08",
  authDomain: "cricketvs-5e595.firebaseapp.com",
  projectId: "cricketvs-5e595",
  storageBucket: "cricketvs-5e595.appspot.com",
  messagingSenderId: "947578850537",
  appId: "1:947578850537:web:67d84cf056fb50b1c3f478",
  measurementId: "G-S71DWGH252"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();


// CHANGE SECTION
function showSection(name) {
  document.querySelectorAll(".section").forEach(s => s.classList.add("hidden"));
  document.getElementById(name + "-section").classList.remove("hidden");

  document.querySelectorAll(".sidebar a").forEach(a => a.classList.remove("active"));
  event.target.classList.add("active");

  if (name === "users") loadUsers();
}


// ADD NEWS
document.getElementById("news-form").addEventListener("submit", async (e) => {
  e.preventDefault();

  const title = document.getElementById("n-title").value;
  const content = document.getElementById("n-content").value;

  const title_hi = document.getElementById("n-title-hi").value;
  const content_hi = document.getElementById("n-content-hi").value;

  const imageUrl = document.getElementById("n-imageurl").value;

  await db.collection("news").add({
    Id: Date.now(),
    title,
    content,
    title_hi,
    content_hi,
    image: imageUrl,
    date: Date.now()
  });

  alert("‚úÖ News Added Successfully!");
  document.getElementById("news-form").reset();
  loadNews();
});


// LOAD NEWS
async function loadNews() {
  const table = document.querySelector("#news-table tbody");
  table.innerHTML = "";

  const snap = await db.collection("news").orderBy("date", "desc").get();
  snap.forEach(doc => {
    const n = doc.data();

    table.innerHTML += `
      <tr>
        <td>${n.title}</td>
        <td>${new Date(n.date).toLocaleString()}</td>
        <td>
          <button class="btn btn-secondary" onclick="viewNews('${doc.id}')">View</button>
          <button class="btn btn-danger" onclick="deleteNews('${doc.id}')">Delete</button>
        </td>
      </tr>`;
  });
}

loadNews();


// VIEW NEWS
async function viewNews(id) {
  const d = await db.collection("news").doc(id).get();
  const n = d.data();

  alert(
    `Title (EN): ${n.title}\n\n` +
    `Content (EN): ${n.content}\n\n` +
    `Title (HI): ${n.title_hi}\n\n` +
    `Content (HI): ${n.content_hi}`
  );
}


// DELETE NEWS
async function deleteNews(id) {
  if (!confirm("Delete this news?")) return;
  await db.collection("news").doc(id).delete();
  alert("Deleted");
  loadNews();
}





  

// ADD PLAYER
document.getElementById("player-form").addEventListener("submit", async (e) => {
  e.preventDefault();

  const name = document.getElementById("p-name").value;
  const info = document.getElementById("p-info").value;

  const name_hi = document.getElementById("p-name-hi").value;
  const info_hi = document.getElementById("p-info-hi").value;

  const imageUrl = document.getElementById("p-imageurl").value;

  await db.collection("player").add({
    Id: Date.now(),
    name,
    info,
    name_hi,
    info_hi,
    image: imageUrl,
    date: Date.now()
  });

  alert("üéØ Player Added Successfully!");
  document.getElementById("player-form").reset();
  loadPlayers();
});

// LOAD PLAYERS
async function loadPlayers() {
  const table = document.querySelector("#player-table tbody");
  table.innerHTML = "";

  const snap = await db.collection("player").orderBy("date", "desc").get();
  snap.forEach(doc => {
    const p = doc.data();
    table.innerHTML += `
      <tr>
        <td>${p.name}</td>
        <td>${new Date(p.date).toLocaleString()}</td>
        <td>
          <button class="btn btn-secondary" onclick="viewPlayer('${doc.id}')">View</button>
          <button class="btn btn-danger" onclick="deletePlayer('${doc.id}')">Delete</button>
        </td>
      </tr>`;
  });
}

// VIEW PLAYER
async function viewPlayer(id) {
  const d = await db.collection("player").doc(id).get();
  const p = d.data();

  alert(
    `Name (EN): ${p.name}\n\n` +
    `Info (EN): ${p.info}\n\n` +
    `Name (HI): ${p.name_hi}\n\n` +
    `Info (HI): ${p.info_hi}\n\n` +
    `Image URL: ${p.image}`
  );
}

// DELETE PLAYER
async function deletePlayer(id) {
  if (!confirm("Delete this player?")) return;

  await db.collection("player").doc(id).delete();
  alert("Player Deleted");
  loadPlayers();
}




// ADD PREVIEW
document.getElementById("preview-form").addEventListener("submit", async (e) => {
  e.preventDefault();

  const name = document.getElementById("pw-name").value;
  const info = document.getElementById("pw-info").value;

  const name_hi = document.getElementById("pw-name-hi").value;
  const info_hi = document.getElementById("pw-info-hi").value;

  const imageUrl = document.getElementById("pw-imageurl").value;

  await db.collection("player").add({
    Id: Date.now(),
    name,
    info,
    name_hi,
    info_hi,
    image: imageUrl,
    date: Date.now()
  });

  alert("üéØ Preview Added Successfully!");
  document.getElementById("preview-form").reset();
  loadPlayers();
});

// LOAD PLAYERS
async function loadPreview() {
  const table = document.querySelector("#preview-table tbody");
  table.innerHTML = "";

  const snap = await db.collection("preview").orderBy("date", "desc").get();
  snap.forEach(doc => {
    const p = doc.data();
    table.innerHTML += `
      <tr>
        <td>${p.name}</td>
        <td>${new Date(p.date).toLocaleString()}</td>
        <td>
          <button class="btn btn-secondary" onclick="viewPlayer('${doc.id}')">View</button>
          <button class="btn btn-danger" onclick="deletePlayer('${doc.id}')">Delete</button>
        </td>
      </tr>`;
  });
}

// VIEW PLAYER
async function viewPreview(id) {
  const d = await db.collection("preview").doc(id).get();
  const p = d.data();

  alert(
    `Name (EN): ${p.name}\n\n` +
    `Info (EN): ${p.info}\n\n` +
    `Name (HI): ${p.name_hi}\n\n` +
    `Info (HI): ${p.info_hi}\n\n` +
    `Image URL: ${p.image}`
  );
}

// DELETE PLAYER
async function deletePlayer(id) {
  if (!confirm("Delete this preview?")) return;

  await db.collection("preview").doc(id).delete();
  alert("Preview Deleted");
  loadPlayers();
}



  


// ADD IPL NEWS
document.getElementById("iplnews-form").addEventListener("submit", async (e) => {
  e.preventDefault();

  const title = document.getElementById("ipl-title").value;
  const content = document.getElementById("ipl-content").value;

  const title_hi = document.getElementById("ipl-title-hi").value;
  const content_hi = document.getElementById("ipl-content-hi").value;

  const imageUrl = document.getElementById("ipl-imageurl").value;

  await db.collection("iplnews").add({
    Id: Date.now(),
    title,
    content,
    title_hi,
    content_hi,
    image: imageUrl,
    date: Date.now()
  });

  alert("üèè IPL News Added Successfully!");
  document.getElementById("iplnews-form").reset();
  loadIPLNews();
});


// LOAD IPL NEWS
async function loadIPLNews() {
  const table = document.querySelector("#iplnews-table tbody");
  table.innerHTML = "";

  const snap = await db.collection("iplnews").orderBy("date", "desc").get();
  snap.forEach(doc => {
    const n = doc.data();

    table.innerHTML += `
      <tr>
        <td>${n.title}</td>
        <td>${new Date(n.date).toLocaleString()}</td>
        <td>
          <button class="btn btn-secondary" onclick="viewIPLNews('${doc.id}')">View</button>
          <button class="btn btn-danger" onclick="deleteIPLNews('${doc.id}')">Delete</button>
        </td>
      </tr>`;
  });
}

loadIPLNews();


// VIEW IPL NEWS
async function viewIPLNews(id) {
  const d = await db.collection("iplnews").doc(id).get();
  const n = d.data();

  alert(
    `Title (EN): ${n.title}\n\n` +
    `Content (EN): ${n.content}\n\n` +
    `Title (HI): ${n.title_hi}\n\n` +
    `Content (HI): ${n.content_hi}`
  );
}


// DELETE IPL NEWS
async function deleteIPLNews(id) {
  if (!confirm("Delete this IPL news?")) return;

  await db.collection("iplnews").doc(id).delete();
  alert("Deleted");
  loadIPLNews();
}


// LOAD USERS
async function loadUsers() {
  const table = document.querySelector("#users-table tbody");
  table.innerHTML = "";

  const snap = await db.collection("user").get();

  snap.forEach(doc => {
    const u = doc.data();

    table.innerHTML += `
      <tr>
        <td>${u.name || "-"}</td>
        <td>${u.email || "-"}</td>
        <td>${u.score || "-"}</td>
        <td>${u.timeTaken || "-"}</td>
        <td>
          <button class="btn btn-danger" onclick="deleteUser('${doc.id}')">Delete</button>
        </td>
      </tr>`;
  });
}


// DELETE USER
async function deleteUser(id) {
  if (!confirm("Delete this user?")) return;

  await db.collection("user").doc(id).delete();
  alert("User deleted successfully!");
  loadUsers();
}



// ADD SPECIAL NEWS
document.getElementById("special-form").addEventListener("submit", async (e) => {
  e.preventDefault();

  const title = document.getElementById("sp-title").value;
  const content = document.getElementById("sp-content").value;

  const title_hi = document.getElementById("sp-title-hi").value;
  const content_hi = document.getElementById("sp-content-hi").value;

  const imageUrl = document.getElementById("sp-imageurl").value;

  await db.collection("special").add({
    Id: Date.now(),
    title,
    content,
    title_hi,
    content_hi,
    image: imageUrl,
    date: Date.now()
  });

  alert("‚≠ê Special News Added Successfully!");
  document.getElementById("special-form").reset();
  loadSpecial();
});



async function loadSpecial() {
  const table = document.querySelector("#special-table tbody");
  table.innerHTML = "";

  const snap = await db.collection("special").orderBy("date", "desc").get();
  snap.forEach(doc => {
    const sp = doc.data();

    table.innerHTML += `
      <tr>
        <td>${sp.title}</td>
        <td>${new Date(sp.date).toLocaleString()}</td>
        <td>
          <button class="btn btn-secondary" onclick="viewSpecial('${doc.id}')">View</button>
          <button class="btn btn-danger" onclick="deleteSpecial('${doc.id}')">Delete</button>
        </td>
      </tr>`;
  });
}

async function viewSpecial(id) {
  const d = await db.collection("special").doc(id).get();
  const sp = d.data();

  alert(
    `Title (EN): ${sp.title}\n\n` +
    `Content (EN): ${sp.content}\n\n` +
    `Title (HI): ${sp.title_hi}\n\n` +
    `Content (HI): ${sp.content_hi}\n\n` +
    `Image URL: ${sp.image}`
  );
}


async function deleteSpecial(id) {
  if (!confirm("Delete this Special News?")) return;

  await db.collection("special").doc(id).delete();
  alert("Deleted");
  loadSpecial();
}



  
// ADD OPINION
document.getElementById("opinion-form").addEventListener("submit", async (e) => {
  e.preventDefault();

  const title = document.getElementById("o-title").value;
  const content = document.getElementById("o-content").value;

  const title_hi = document.getElementById("o-title-hi").value;
  const content_hi = document.getElementById("o-content-hi").value;

  const imageUrl = document.getElementById("o-imageurl").value;
  const author = document.getElementById("o-author").value;

  await db.collection("opinion").add({
    Id: Date.now(),
    title,
    content,
    title_hi,
    content_hi,
    author,
    image: imageUrl,
    date: Date.now()
  });

  alert("üí¨ Opinion Added Successfully!");
  document.getElementById("opinion-form").reset();
  loadOpinion();
});

// LOAD OPINIONS
async function loadOpinion() {
  const table = document.querySelector("#opinion-table tbody");
  table.innerHTML = "";

  const snap = await db.collection("opinion").orderBy("date", "desc").get();
  snap.forEach(doc => {
    const o = doc.data();

    table.innerHTML += `
      <tr>
        <td>${o.title}</td>
        <td>${o.author}</td>
        <td>${new Date(o.date).toLocaleString()}</td>
        <td>
          <button class="btn btn-secondary" onclick="viewOpinion('${doc.id}')">View</button>
          <button class="btn btn-danger" onclick="deleteOpinion('${doc.id}')">Delete</button>
        </td>
      </tr>`;
  });
}

// VIEW OPINION
async function viewOpinion(id) {
  const d = await db.collection("opinion").doc(id).get();
  const o = d.data();

  alert(
    `Title (EN): ${o.title}\n\n` +
    `Content (EN): ${o.content}\n\n` +
    `Title (HI): ${o.title_hi}\n\n` +
    `Content (HI): ${o.content_hi}\n\n` +
    `Author: ${o.author}`
  );
}

// DELETE OPINION
async function deleteOpinion(id) {
  if (!confirm("Delete this Opinion?")) return;

  await db.collection("opinion").doc(id).delete();
  alert("Deleted");
  loadOpinion();
}

// Show Opinion Section
function showSection(name) {
  document.querySelectorAll(".section").forEach(s => s.classList.add("hidden"));
  document.getElementById(name + "-section").classList.remove("hidden");

  document.querySelectorAll(".sidebar a").forEach(a => a.classList.remove("active"));
  event.target.classList.add("active");

  if (name === "users") loadUsers();
  if (name === "spotlight") loadSpotlight();
  if (name === "opinion") loadOpinion();
  if (name === "preview") loadPreview();
}
  


  
// ADD SPOTLIGHT
document.getElementById("spotlight-form").addEventListener("submit", async (e) => {
  e.preventDefault();

  const title = document.getElementById("s-title").value;
  const content = document.getElementById("s-content").value;

  const title_hi = document.getElementById("s-title-hi").value;
  const content_hi = document.getElementById("s-content-hi").value;

  const imageUrl = document.getElementById("s-imageurl").value;

  await db.collection("spotlight").add({
    Id: Date.now(),
    title,
    content,
    title_hi,
    content_hi,
    image: imageUrl,
    date: Date.now()
  });

  alert("‚ú® Spotlight Added Successfully!");
  document.getElementById("spotlight-form").reset();
  loadSpotlight();
});

// LOAD SPOTLIGHT
async function loadSpotlight() {
  const table = document.querySelector("#spotlight-table tbody");
  table.innerHTML = "";

  const snap = await db.collection("spotlight").orderBy("date", "desc").get();
  snap.forEach(doc => {
    const s = doc.data();
    table.innerHTML += `
      <tr>
        <td>${s.title}</td>
        <td>${new Date(s.date).toLocaleString()}</td>
        <td>
          <button class="btn btn-secondary" onclick="viewSpotlight('${doc.id}')">View</button>
          <button class="btn btn-danger" onclick="deleteSpotlight('${doc.id}')">Delete</button>
        </td>
      </tr>`;
  });
}

// VIEW SPOTLIGHT
async function viewSpotlight(id) {
  const d = await db.collection("spotlight").doc(id).get();
  const s = d.data();

  alert(
    `Title (EN): ${s.title}\n\n` +
    `Content (EN): ${s.content}\n\n` +
    `Title (HI): ${s.title_hi}\n\n` +
    `Content (HI): ${s.content_hi}\n\n` +
    `Image URL: ${s.image}`
  );
}

// DELETE SPOTLIGHT
async function deleteSpotlight(id) {
  if (!confirm("Delete this Spotlight?")) return;
  await db.collection("spotlight").doc(id).delete();
  alert("Deleted");
  loadSpotlight();
}

// Load spotlight when admin opens section
function showSection(name) {
  document.querySelectorAll(".section").forEach(s => s.classList.add("hidden"));
  document.getElementById(name + "-section").classList.remove("hidden");

  document.querySelectorAll(".sidebar a").forEach(a => a.classList.remove("active"));
  event.target.classList.add("active");

  if (name === "users") loadUsers();
  if (name === "spotlight") loadSpotlight();
  if (name === "special") loadSpecial();
  if (name === "player") loadPlayers();
  if (name === "preview") loadPreview();
}
  
</script>

</body>
</html>
